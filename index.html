<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Buzz Wire â€“ Bottom Center Joystick</title>

<style>
  body {
    margin: 0;
    background: #111;
    color: #fff;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h2 {
    margin: 10px 0 4px;
  }

  #stats {
    color: #00ffcc;
    margin-bottom: 6px;
    font-size: 18px;
  }

  #container {
    position: relative;
    width: 900px;
  }

  canvas {
    background: #000;
    border: 2px solid #555;
    display: block;
  }

  /* ===== JOYSTICK BOTTOM CENTER ===== */
  #joystick {
    position: absolute;
    left: 50%;
    bottom: 15px;              /* ðŸ”½ bottom */
    transform: translateX(-50%);
    width: 140px;
    height: 140px;
    border-radius: 50%;
    border: 3px solid #00ffcc;
    background: rgba(255,255,255,0.08);
    touch-action: none;
  }

  #stick {
    position: absolute;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: #00ffcc;
    left: 45px;
    top: 45px;
  }

  #overlay {
    position: absolute;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 48px;
    font-weight: bold;
    color: red;
    background: rgba(0,0,0,0.6);
    pointer-events: none;
  }
</style>
</head>

<body>

<h2>Buzz Wire Game</h2>
<div id="stats">Move joystick to start</div>

<div id="container">
  <canvas id="game" width="900" height="450"></canvas>

  <!-- JOYSTICK -->
  <div id="joystick">
    <div id="stick"></div>
  </div>

  <div id="overlay">LOOOOOOSER</div>
</div>

<script>
window.addEventListener("load", () => {

  /* ========= CANVAS ========= */
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");
  const stats = document.getElementById("stats");
  const overlay = document.getElementById("overlay");

  /* ========= JOYSTICK ========= */
  const joystick = document.getElementById("joystick");
  const stick = document.getElementById("stick");

  const JOY_RADIUS = 70;
  const STICK_RADIUS = 25;
  const SPEED = 3;

  let joyActive = false;
  let joyDX = 0;
  let joyDY = 0;

  /* ========= GAME OBJECTS ========= */
  const START = { x:40, y:210, w:35, h:35 };

  let started = false;
  let enteredWire = false;
  let gameOver = false;

  let cursor = {
    x: START.x + START.w / 2,
    y: START.y + START.h / 2
  };

  /* ========= DRAW ========= */
  function drawPath(){
    ctx.beginPath();
    ctx.strokeStyle = "lime";
    ctx.lineWidth = 10;
    ctx.moveTo(70,230);
    ctx.lineTo(860,230);
    ctx.stroke();
  }

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    drawPath();

    ctx.fillStyle="blue";
    ctx.fillRect(START.x,START.y,START.w,START.h);

    ctx.beginPath();
    ctx.arc(cursor.x, cursor.y, 3, 0, Math.PI*2);
    ctx.fillStyle="#0066ff";
    ctx.fill();
  }

  /* ========= GAME LOOP ========= */
  function update(){
    if(started && joyActive && !gameOver){
      cursor.x += joyDX * SPEED;
      cursor.y += joyDY * SPEED;

      cursor.x = Math.max(0, Math.min(canvas.width, cursor.x));
      cursor.y = Math.max(0, Math.min(canvas.height, cursor.y));

      const inside = ctx.isPointInStroke(cursor.x, cursor.y);

      if(!enteredWire && inside){
        enteredWire = true;
        stats.textContent = "On the wireâ€¦ steady!";
      }

      if(enteredWire && !inside){
        gameOver = true;
        overlay.style.display = "flex";
        stats.textContent = "OUT OF WIRE";
      }
    }

    draw();
    requestAnimationFrame(update);
  }

  /* ========= JOYSTICK INPUT ========= */
  joystick.addEventListener("pointerdown", e => {
    joyActive = true;
    started = true;
    stats.textContent = "Game started";
    joystick.setPointerCapture(e.pointerId);
  });

  joystick.addEventListener("pointermove", e => {
    if(!joyActive || gameOver) return;

    const rect = joystick.getBoundingClientRect();
    let x = e.clientX - rect.left - JOY_RADIUS;
    let y = e.clientY - rect.top  - JOY_RADIUS;

    const dist = Math.hypot(x, y);
    if(dist > JOY_RADIUS){
      x *= JOY_RADIUS / dist;
      y *= JOY_RADIUS / dist;
    }

    stick.style.left = (x + JOY_RADIUS - STICK_RADIUS) + "px";
    stick.style.top  = (y + JOY_RADIUS - STICK_RADIUS) + "px";

    joyDX = x / JOY_RADIUS;
    joyDY = y / JOY_RADIUS;
  });

  function releaseStick(){
    joyActive = false;
    joyDX = joyDY = 0;
    stick.style.left = "45px";
    stick.style.top  = "45px";
  }

  joystick.addEventListener("pointerup", releaseStick);
  joystick.addEventListener("pointercancel", releaseStick);

  draw();
  update();
});
</script>

</body>
</html>
